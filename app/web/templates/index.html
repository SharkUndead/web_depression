<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng H·ªó tr·ª£ S·ª©c kh·ªèe Tinh th·∫ßn</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container my-5">
        <div class="text-center mb-5">
            <h2>H·ªá th·ªëng H·ªó tr·ª£ S·ª©c kh·ªèe Tinh th·∫ßn</h2>
            <p class="lead text-secondary">Cung c·∫•p th√¥ng tin c·ªßa b·∫°n ƒë·ªÉ nh·∫≠n ƒë∆∞·ª£c ƒë√°nh gi√° v√† g·ª£i √Ω.</p>
        </div>

        <div class="main-content-wrapper">
            <ul class="nav nav-tabs" id="mainTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#predict-pane" type="button">D·ª± ƒëo√°n Tr·∫ßm c·∫£m</button>
                </li>
                {% for category, data in index_questions_data.items() %}
                <li class="nav-item" role="presentation">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#{{category}}-pane" type="button">{{ data.title }}</button>
                </li>
                {% endfor %}
            </ul>

            <div class="tab-content" id="mainTabContent">
                
                <div class="tab-pane fade show active p-4" id="predict-pane" role="tabpanel">
                    <form id="predict-form">
                        <div class="row g-4">
                             {% for field in ['age', 'city', 'degree', 'sleep_duration', 'dietary_habits', 'work/study_hours', 'academic_pressure', 'study_satisfaction', 'financial_stress', 'cgpa'] %}
                             <div class="col-md-6">
                                <label for="{{ field }}" class="form-label">{{ field_labels.get(field, field) }}</label>
                                {% if field in form_options %}
                                <select class="form-select" id="{{ field }}" name="{{ field }}" required>
                                    <option value="" selected disabled>-- Ch·ªçn --</option>
                                    {% for option in form_options[field] %}
                                    <option value="{{ option }}">{{ option }}</option>
                                    {% endfor %}
                                </select>
                                {% else %}
                                    {% set placeholder_text = field_placeholders.get(field, '') %}
                                    {% if field == 'cgpa' %}
                                        <input type="number" step="0.1" min="0" max="10" class="form-control" id="{{ field }}" name="{{ field }}" placeholder="{{ placeholder_text }}" required>
                                    {% else %}
                                        <input type="number" step="1" min="0" class="form-control" id="{{ field }}" name="{{ field }}" placeholder="{{ placeholder_text }}" required>
                                    {% endif %}
                                {% endif %}
                            </div>
                            {% endfor %}
                            
                            <div class="col-12 mt-4">
                                <label class="form-label">{{ field_labels.get('gender') }}</label>
                                <div class="radio-group">
                                    {% for text, val in gender_options %}
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="gender" id="gender_{{ val }}" value="{{ val }}" required>
                                        <label class="form-check-label" for="gender_{{ val }}">{{ text }}</label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% for field in ['have_you_ever_had_suicidal_thoughts_?', 'family_history_of_mental_illness'] %}
                            <div class="col-12 mt-3">
                                <label class="form-label">{{ field_labels.get(field) }}</label>
                                <div class="radio-group">
                                    {% for text, val in yes_no_options %}
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="{{ field }}" id="{{ field }}_{{ val }}" value="{{ val }}" required>
                                        <label class="form-check-label" for="{{ field }}_{{ val }}">{{ text }}</label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <hr class="my-4" style="border-color: var(--border-color);">
                        <button class="w-100 btn btn-primary btn-lg" type="submit">üëâ D·ª± ƒëo√°n</button>
                    </form>
                </div>

                {% for category, data in index_questions_data.items() %}
                <div class="tab-pane fade p-4" id="{{category}}-pane" role="tabpanel">
                    <form class="index-form" data-category="{{ category }}">
                        <h4 class="mb-2">{{ data.title }}</h4>
                        <p class="text-secondary">{{ data.description }}</p>
                        {% for question in data.questions %}
                            {% set question_index = loop.index %}
                            <div class="question-block my-4">
                                <label class="form-label fw-medium">{{ question_index }}. {{ question }}</label>
                                <div class="radio-group">
                                    {% for value, text in data.options %}
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="{{ category }}_q{{ question_index }}" id="{{ category }}_q{{ question_index }}_opt{{ value }}" value="{{ value }}" required>
                                        <label class="form-check-label" for="{{ category }}_q{{ question_index }}_opt{{ value }}">{{ text }}</label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                        <hr class="my-4">
                        <button class="btn btn-primary" type="submit">üìà T√≠nh to√°n</button>
                    </form>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div id="result-box" class="result-box">
            <h4 id="result-title"></h4>
            <div id="result-content"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>